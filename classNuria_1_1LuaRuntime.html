<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>NuriaProject Framework: Nuria::LuaRuntime Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NuriaProject Framework
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">The NuriaProject Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Modules</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Nuria</b></li><li class="navelem"><a class="el" href="classNuria_1_1LuaRuntime.html">LuaRuntime</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classNuria_1_1LuaRuntime-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Nuria::LuaRuntime Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Runtime for the LUA scripting language.  
 <a href="classNuria_1_1LuaRuntime.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="luaruntime_8hpp_source.html">luaruntime.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Nuria::LuaRuntime:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classNuria_1_1LuaRuntime.png" usemap="#Nuria::LuaRuntime_map" alt=""/>
  <map id="Nuria::LuaRuntime_map" name="Nuria::LuaRuntime_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aac98c7c84cae0105f7f857649b1924f6"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#aac98c7c84cae0105f7f857649b1924f6">LuaLib</a> { <br />
&#160;&#160;<b>Base</b> = 0x01, 
<b>Math</b> = 0x02, 
<b>String</b> = 0x04, 
<b>Table</b> = 0x08, 
<br />
&#160;&#160;<b>InputOutput</b> = 0x10, 
<b>OperatinSystem</b> = 0x20, 
<b>Package</b> = 0x40, 
<b>Debug</b> = 0x80, 
<br />
&#160;&#160;<b>Bit</b> = 0x100, 
<b>Jit</b> = 0x200, 
<b>Ffi</b> = 0x400, 
<a class="el" href="classNuria_1_1LuaRuntime.html#aac98c7c84cae0105f7f857649b1924f6a26dc37e7b5645b171cc04f3badaccb98">AllLibraries</a>
<br />
 }</td></tr>
<tr class="separator:aac98c7c84cae0105f7f857649b1924f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d320e4d6093f345fed41673d9bdb7f5"><td class="memItemLeft" align="right" valign="top">typedef std::function&lt; bool(<a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0">Ownership</a>, <br class="typebreak" />
void *, <a class="el" href="classNuria_1_1MetaObject.html">MetaObject</a> *) &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a1d320e4d6093f345fed41673d9bdb7f5">ObjectHandler</a></td></tr>
<tr class="separator:a1d320e4d6093f345fed41673d9bdb7f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56fc87ab26e8f5d460d2b3cfd34b92d0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0">Ownership</a> { <a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0a20ef42f35e6712b7cfe1e27cb3935633">OwnedByLua</a> = 0x1, 
<a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0a4b1d0cacb62572b2ac267e4ec668dcc1">OwnedByCpp</a> = 0x2
 }</td></tr>
<tr class="separator:a56fc87ab26e8f5d460d2b3cfd34b92d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aea211f412285e996f6b1a8524c0b4b40"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#aea211f412285e996f6b1a8524c0b4b40">LuaRuntime</a> (LuaLibs libraries, QObject *parent=0)</td></tr>
<tr class="separator:aea211f412285e996f6b1a8524c0b4b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7adfd6bb47967735b3901f6bbf5a07a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#ad7adfd6bb47967735b3901f6bbf5a07a">~LuaRuntime</a> () override</td></tr>
<tr class="separator:ad7adfd6bb47967735b3901f6bbf5a07a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61604807abd5cd7e2255864437f71c0c"><td class="memItemLeft" align="right" valign="top">LuaValues&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a61604807abd5cd7e2255864437f71c0c">allResults</a> () const </td></tr>
<tr class="separator:a61604807abd5cd7e2255864437f71c0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d3bce53da1c7ef8b8c2c7b43d90b786"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a2d3bce53da1c7ef8b8c2c7b43d90b786">collectGarbage</a> ()</td></tr>
<tr class="separator:a2d3bce53da1c7ef8b8c2c7b43d90b786"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad63857d6cce46a9a4750f4a8ff84fd94"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#ad63857d6cce46a9a4750f4a8ff84fd94">execute</a> (const QByteArray &amp;script)</td></tr>
<tr class="separator:ad63857d6cce46a9a4750f4a8ff84fd94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40f597c2f05da2f9e95d34b61133afe9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a40f597c2f05da2f9e95d34b61133afe9">executeStream</a> (QIODevice *device)</td></tr>
<tr class="separator:a40f597c2f05da2f9e95d34b61133afe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6707459d0d9a5c590b74b793bc9d43a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNuria_1_1LuaValue.html">LuaValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a6707459d0d9a5c590b74b793bc9d43a9">global</a> (const QString &amp;name)</td></tr>
<tr class="separator:a6707459d0d9a5c590b74b793bc9d43a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1c1686e6fa3a4e7ba4c2f3f2ac6fad4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#ad1c1686e6fa3a4e7ba4c2f3f2ac6fad4">hasGlobal</a> (const QString &amp;name)</td></tr>
<tr class="separator:ad1c1686e6fa3a4e7ba4c2f3f2ac6fad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4ba4ce5dba3202014d54d4db645e48d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNuria_1_1LuaValue.html">LuaValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#ac4ba4ce5dba3202014d54d4db645e48d">lastResult</a> () const </td></tr>
<tr class="separator:ac4ba4ce5dba3202014d54d4db645e48d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0476ec06ba4189f8215a9b1fb815217c"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a0476ec06ba4189f8215a9b1fb815217c">luaState</a> ()</td></tr>
<tr class="separator:a0476ec06ba4189f8215a9b1fb815217c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd5804251068bc40c267bb30b2c49fb6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0">Ownership</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#abd5804251068bc40c267bb30b2c49fb6">objectOwnership</a> (void *object)</td></tr>
<tr class="separator:abd5804251068bc40c267bb30b2c49fb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20c4df465f0bee2f8cedfd651862fb3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a20c4df465f0bee2f8cedfd651862fb3b">registerMetaObject</a> (<a class="el" href="classNuria_1_1MetaObject.html">MetaObject</a> *metaObject, const QByteArray &amp;prefix=QByteArray())</td></tr>
<tr class="separator:a20c4df465f0bee2f8cedfd651862fb3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2837aa6297d2f7075e92a77e0e1fa413"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a2837aa6297d2f7075e92a77e0e1fa413">setGlobal</a> (const QString &amp;name, const QVariant &amp;value)</td></tr>
<tr class="separator:a2837aa6297d2f7075e92a77e0e1fa413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a784078883bcb71d81f0006f973ff612a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a784078883bcb71d81f0006f973ff612a">setGlobal</a> (const QString &amp;name, const <a class="el" href="classNuria_1_1LuaValue.html">LuaValue</a> &amp;value)</td></tr>
<tr class="separator:a784078883bcb71d81f0006f973ff612a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a6e13b5eb7afd0056d9a3be9c3e5c3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a7a6e13b5eb7afd0056d9a3be9c3e5c3c">setObjectHandler</a> (<a class="el" href="classNuria_1_1LuaRuntime.html#a1d320e4d6093f345fed41673d9bdb7f5">ObjectHandler</a> handler, OwnershipFlags flags=OwnershipFlags(<a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0a20ef42f35e6712b7cfe1e27cb3935633">OwnedByLua</a>|<a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0a4b1d0cacb62572b2ac267e4ec668dcc1">OwnedByCpp</a>))</td></tr>
<tr class="separator:a7a6e13b5eb7afd0056d9a3be9c3e5c3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12d0133f249cf5dc85cb774fa338bbba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNuria_1_1LuaRuntime.html#a12d0133f249cf5dc85cb774fa338bbba">setObjectOwnership</a> (void *object, <a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0">Ownership</a> ownership)</td></tr>
<tr class="separator:a12d0133f249cf5dc85cb774fa338bbba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a841c900cf5e168afe12197623b0d9180"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a841c900cf5e168afe12197623b0d9180"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>Internal::Delegate</b></td></tr>
<tr class="separator:a841c900cf5e168afe12197623b0d9180"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64e14731cc68df014bc61c52e6dd421b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a64e14731cc68df014bc61c52e6dd421b"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>LuaBuiltinFunctions</b></td></tr>
<tr class="separator:a64e14731cc68df014bc61c52e6dd421b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95a8b85a410ea319102cb20ca90b7f3c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a95a8b85a410ea319102cb20ca90b7f3c"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>LuaCallbackTrampoline</b></td></tr>
<tr class="separator:a95a8b85a410ea319102cb20ca90b7f3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a732a269ee94851e32ddf6187256ee806"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a732a269ee94851e32ddf6187256ee806"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>LuaMetaObject</b></td></tr>
<tr class="separator:a732a269ee94851e32ddf6187256ee806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a6eb2a370eafbd3514eb0bbafd7b9ad"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7a6eb2a370eafbd3514eb0bbafd7b9ad"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>LuaMetaObjectWrapper</b></td></tr>
<tr class="separator:a7a6eb2a370eafbd3514eb0bbafd7b9ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47aa4adaeb6a4d0b8eb7596aeac51e9a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a47aa4adaeb6a4d0b8eb7596aeac51e9a"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>LuaObject</b></td></tr>
<tr class="separator:a47aa4adaeb6a4d0b8eb7596aeac51e9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Runtime for the LUA scripting language. </p>
<p>This class is a C++/Qt wrapper for LuaJit, a JITing implementation of the LUA VM. You can use it if you need scripting support in your application easily.</p>
<dl class="section user"><dt>Usage</dt><dd>It's really easy to get started! First, instantiate a <a class="el" href="classNuria_1_1LuaRuntime.html" title="Runtime for the LUA scripting language. ">LuaRuntime</a>. You can then export specific C++ classes to LUA using <a class="el" href="classNuria_1_1LuaRuntime.html#a20c4df465f0bee2f8cedfd651862fb3b">registerMetaObject()</a> or run scripts using <a class="el" href="classNuria_1_1LuaRuntime.html#ad63857d6cce46a9a4750f4a8ff84fd94">execute()</a> or <a class="el" href="classNuria_1_1LuaRuntime.html#a40f597c2f05da2f9e95d34b61133afe9">executeStream()</a>.</dd></dl>
<p>Currently, the only exposed API to Lua provided by <a class="el" href="classNuria_1_1LuaRuntime.html" title="Runtime for the LUA scripting language. ">LuaRuntime</a> is "Nuria.connect(object, slotName, function)", which works like QObject::connect().</p>
<dl class="section user"><dt>Garbage collection and ownership</dt><dd>Garbage collection is taken care of by Lua itself. What's more important is ownership of instances of C++ classes and structures. Generally, a class instance is owned by the world it was created in (So C++ or LUA) and thus may or may not be subject to garbage collection. This means in plain words:</dd></dl>
<ul>
<li>A object created inside LUA belongs to LUA and is subject to the GC.</li>
<li>A object created outside of LUA is <b>not</b> subject to the GC.</li>
</ul>
<p>You can control this more fine-grained if you want to though. <a class="el" href="classNuria_1_1LuaObject.html#a3d82db2551733c0ad1b6cce419fa852d">LuaObject::fromStructure</a> has a <em>ownership</em> argument for this. To change ownership later, you can use <a class="el" href="classNuria_1_1LuaRuntime.html#a12d0133f249cf5dc85cb774fa338bbba">setObjectOwnership()</a> and <a class="el" href="classNuria_1_1LuaRuntime.html#abd5804251068bc40c267bb30b2c49fb6">objectOwnership()</a> to set or get the current ownership respectively. You can also register a handler using <a class="el" href="classNuria_1_1LuaRuntime.html#a7a6e13b5eb7afd0056d9a3be9c3e5c3c">setObjectHandler()</a> to install a runtime-wide function which is called whenever LUA collected a C++ object.</p>
<dl class="section user"><dt>Class interoperability</dt><dd>Using <a class="el" href="classNuria_1_1MetaObject.html" title="The MetaObject class provides access to meta-data of types at run-time. ">Nuria::MetaObject</a>, it's possible to use C++ classes inside Lua. You can pass C++ objects (That is, a void pointer with a <a class="el" href="classNuria_1_1MetaObject.html" title="The MetaObject class provides access to meta-data of types at run-time. ">MetaObject</a>) to Lua or expose MetaObjects directly to Lua, which enable Lua scripts to construct instances at will. </dd></dl>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a1d320e4d6093f345fed41673d9bdb7f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::function&lt; bool(<a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0">Ownership</a>, void *, <a class="el" href="classNuria_1_1MetaObject.html">MetaObject</a> *) &gt; <a class="el" href="classNuria_1_1LuaRuntime.html#a1d320e4d6093f345fed41673d9bdb7f5">Nuria::LuaRuntime::ObjectHandler</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handler method for to-be-collected objects. This method is called when LUA is about to collect an object. The prototype looks as follows: </p><div class="fragment"><div class="line">bool (<a class="code" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0">Ownership</a> ownership, <span class="keywordtype">void</span> *<span class="keywordtype">object</span>, MetaObject *metaObject);</div>
</div><!-- fragment --><p><em>ownership</em> indicates who owns the object, <em>object</em> is the affected object with its <em>metaObject</em>. If <em>ownership</em> is <code>OwnedByLua</code>, the <em>object</em> will be destroyed if the handler returns <code>true</code>. In any other case <em>object</em> is not touched. </p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="aac98c7c84cae0105f7f857649b1924f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classNuria_1_1LuaRuntime.html#aac98c7c84cae0105f7f857649b1924f6">Nuria::LuaRuntime::LuaLib</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Built-in LUA libraries. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="aac98c7c84cae0105f7f857649b1924f6a26dc37e7b5645b171cc04f3badaccb98"></a>AllLibraries&#160;</td><td class="fielddoc">
<p>All LUA libraries. This is the default. </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a56fc87ab26e8f5d460d2b3cfd34b92d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0">Nuria::LuaRuntime::Ownership</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ownership of objects inside LUA. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a56fc87ab26e8f5d460d2b3cfd34b92d0a20ef42f35e6712b7cfe1e27cb3935633"></a>OwnedByLua&#160;</td><td class="fielddoc">
<p>The object is owned by LUA and thus is subject to its garbage collection. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a56fc87ab26e8f5d460d2b3cfd34b92d0a4b1d0cacb62572b2ac267e4ec668dcc1"></a>OwnedByCpp&#160;</td><td class="fielddoc">
<p>The object is owned by C++ and thus is <b>not</b> garbage collected by LUA, even if it's no longer used in the runtime anywhere. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aea211f412285e996f6b1a8524c0b4b40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Nuria::LuaRuntime::LuaRuntime </td>
          <td>(</td>
          <td class="paramtype">LuaLibs&#160;</td>
          <td class="paramname"><em>libraries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QObject *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor. Loads all <em>libraries</em> into the environment (These are provided by the internal Lua implementation). </p>

</div>
</div>
<a class="anchor" id="ad7adfd6bb47967735b3901f6bbf5a07a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Nuria::LuaRuntime::~LuaRuntime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a61604807abd5cd7e2255864437f71c0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LuaValues Nuria::LuaRuntime::allResults </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Like <a class="el" href="classNuria_1_1LuaRuntime.html#ac4ba4ce5dba3202014d54d4db645e48d">lastResult()</a>, but instead returns all results of the last <a class="el" href="classNuria_1_1LuaRuntime.html#ad63857d6cce46a9a4750f4a8ff84fd94">execute()</a> call. If no results were returned from the LUA script, an empty list is returned. </p>

</div>
</div>
<a class="anchor" id="a2d3bce53da1c7ef8b8c2c7b43d90b786"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nuria::LuaRuntime::collectGarbage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Instructs the LUA runtime to run the garbage collector, which will free memory no longer used. If you're doing this to not only destroy structures but also really free their memory now, you should call this method twice as the LUA garbage collector will only destroy instances at first. </p>

</div>
</div>
<a class="anchor" id="ad63857d6cce46a9a4750f4a8ff84fd94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Nuria::LuaRuntime::execute </td>
          <td>(</td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>script</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Executes <em>script</em> in the runtime. Returns <code>true</code> on success. Returns <code>false</code> if an error occured, like a syntax error.</p>
<p>If the call failed, <a class="el" href="classNuria_1_1LuaRuntime.html#ac4ba4ce5dba3202014d54d4db645e48d">lastResult()</a> will return a string containing a human-readable error message.</p>
<p>After <em>script</em> has returned, <a class="el" href="classNuria_1_1LuaRuntime.html#ac4ba4ce5dba3202014d54d4db645e48d">lastResult()</a> will return the result of it. If there were multiple results, then <a class="el" href="classNuria_1_1LuaRuntime.html#ac4ba4ce5dba3202014d54d4db645e48d">lastResult()</a> will return a QVariantList containing all results.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classNuria_1_1LuaRuntime.html#ac4ba4ce5dba3202014d54d4db645e48d">lastResult</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a40f597c2f05da2f9e95d34b61133afe9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Nuria::LuaRuntime::executeStream </td>
          <td>(</td>
          <td class="paramtype">QIODevice *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads all available bytes from <em>device</em> and executes it as script. <em>device</em> must be open and readable. Result is the same as <a class="el" href="classNuria_1_1LuaRuntime.html#ad63857d6cce46a9a4750f4a8ff84fd94">execute()</a>. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="classNuria_1_1LuaRuntime.html#ac4ba4ce5dba3202014d54d4db645e48d">lastResult</a> <a class="el" href="classNuria_1_1LuaRuntime.html#ad63857d6cce46a9a4750f4a8ff84fd94">execute</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a6707459d0d9a5c590b74b793bc9d43a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNuria_1_1LuaValue.html">LuaValue</a> Nuria::LuaRuntime::global </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns global variable <em>name</em>. </p>

</div>
</div>
<a class="anchor" id="ad1c1686e6fa3a4e7ba4c2f3f2ac6fad4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Nuria::LuaRuntime::hasGlobal </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns <code>true</code> if there's a global variable called <em>name</em>. </p>

</div>
</div>
<a class="anchor" id="ac4ba4ce5dba3202014d54d4db645e48d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNuria_1_1LuaValue.html">LuaValue</a> Nuria::LuaRuntime::lastResult </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the result of the last call to <a class="el" href="classNuria_1_1LuaRuntime.html#ad63857d6cce46a9a4750f4a8ff84fd94">execute()</a>. If multiple results were returned only the first one is returend. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="classNuria_1_1LuaRuntime.html#a61604807abd5cd7e2255864437f71c0c">allResults</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a0476ec06ba4189f8215a9b1fb815217c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* Nuria::LuaRuntime::luaState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the internal LUA runtime. The returned pointer is of type lua_State*. To make use of it, you'll need to #include "lua.hpp".</p>
<dl class="section warning"><dt>Warning</dt><dd>The Lua integration doesn't expect sudden changes to the environment. Be careful with this function. </dd></dl>

</div>
</div>
<a class="anchor" id="abd5804251068bc40c267bb30b2c49fb6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0">Ownership</a> Nuria::LuaRuntime::objectOwnership </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>object</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the ownership of <em>object</em>. If <em>object</em> does not exist, <code>OwnedByLua</code> is returned. </p>

</div>
</div>
<a class="anchor" id="a20c4df465f0bee2f8cedfd651862fb3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nuria::LuaRuntime::registerMetaObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNuria_1_1MetaObject.html">MetaObject</a> *&#160;</td>
          <td class="paramname"><em>metaObject</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>prefix</em> = <code>QByteArray()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Registers <em>metaObject</em> for usage in the runtime. After this, the class can be used in LUA. The type will be stored as userdata inside LUA. Its name will be what <a class="el" href="classNuria_1_1MetaObject.html#a05a11cc0f6ffc6137977072b43044035">MetaObject::className()</a> returns. Namespaces will be interpreted as tables, meaning that the class "Something::Foo::Bar" will end up as "Something.Foo.Bar". <em>prefix</em> is prepended to the class name verbatim. Thus, if you want to put the meta object inside another table, you prefix to end with "::".</p>
<dl class="section note"><dt>Note</dt><dd>Calling this multiple times on the same <em>metaObject</em> is harmless. </dd></dl>

</div>
</div>
<a class="anchor" id="a2837aa6297d2f7075e92a77e0e1fa413"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nuria::LuaRuntime::setGlobal </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QVariant &amp;&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets a global variable called <em>name</em> to <em>value</em>. </p>

</div>
</div>
<a class="anchor" id="a784078883bcb71d81f0006f973ff612a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nuria::LuaRuntime::setGlobal </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classNuria_1_1LuaValue.html">LuaValue</a> &amp;&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><em>overload</em> </p>

</div>
</div>
<a class="anchor" id="a7a6e13b5eb7afd0056d9a3be9c3e5c3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nuria::LuaRuntime::setObjectHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNuria_1_1LuaRuntime.html#a1d320e4d6093f345fed41673d9bdb7f5">ObjectHandler</a>&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OwnershipFlags&#160;</td>
          <td class="paramname"><em>flags</em> = <code>OwnershipFlags(<a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0a20ef42f35e6712b7cfe1e27cb3935633">OwnedByLua</a>|<a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0a4b1d0cacb62572b2ac267e4ec668dcc1">OwnedByCpp</a>)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Installs a object handler called whenever a object is about to be collected by LUAs garbage collector. You can control when <em>handler</em> should be called using <em>flags</em>, e.g. to be only notified when an object owned by LUA is collected.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classNuria_1_1LuaRuntime.html#a1d320e4d6093f345fed41673d9bdb7f5">ObjectHandler</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a12d0133f249cf5dc85cb774fa338bbba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nuria::LuaRuntime::setObjectOwnership </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNuria_1_1LuaRuntime.html#a56fc87ab26e8f5d460d2b3cfd34b92d0">Ownership</a>&#160;</td>
          <td class="paramname"><em>ownership</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Changes the ownership of <em>object</em> to <em>ownership</em>. If <em>object</em> is not known to LUA, this function has no effect. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="luaruntime_8hpp_source.html">luaruntime.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Sep 28 2014 00:51:56 for NuriaProject Framework by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
